<ion-header no-border color="dark">
    <ion-toolbar color="dark">
        <ion-buttons slot="start">
            <ion-menu-button color="light"></ion-menu-button>
        </ion-buttons>

        <ion-title color="light">
            <span *ngIf="isCreate">Create OpenDJ Event</span>
            <span *ngIf="!isCreate">Update OpenDJ Event</span>
        </ion-title>
        <ion-buttons slot="end">
            <ion-button color="light" (tap)='refresh()'>
                <ion-icon name="refresh"></ion-icon>
            </ion-button>
        </ion-buttons>
    </ion-toolbar>
</ion-header>

<ion-content color="dark">

    <div class="event-form-wrapper">

        <ion-card *ngIf="isCreate" style="background-color: #111;">
            <ion-item>
                <ion-icon name="wine" slot="start" color="light"></ion-icon>
                <ion-label text-wrap>Create your own OpenDJ Music Event!</ion-label>
                <ion-button fill="outline" slot="end">Help?</ion-button>
            </ion-item>

            <ion-card-content>
                Fill in your data and create your individual OpenDJ Party Event. Share your party link with friends,
                colleagues and people around the globe...
            </ion-card-content>
        </ion-card>

        <form [formGroup]="eventForm">

            <ion-list style="background: transparent !important;" lines="none">
                <ion-item-group>
                    <ion-item-divider mode="md">
                        <ion-label>Event data</ion-label>
                    </ion-item-divider>

                    <ion-item tooltip="This is the event ID" placement="left">
                        <ion-label>ID:</ion-label>
                        <ion-input type="text" formControlName="eventID" color="primary" text-right>

                        </ion-input>
                    </ion-item>

                    <ion-item tooltip="The title of your event" placement="left">
                        <ion-label>Name:</ion-label>
                        <ion-input type="text" formControlName="name" color="primary" text-right></ion-input>
                    </ion-item>

                    <ion-item tooltip="Define the URL under which your event is accessible" placement="left">
                        <ion-label>Link:</ion-label>
                        <ion-input type="text" formControlName="url" color="primary" text-right>
                        </ion-input>
                    </ion-item>

                    <ion-item tooltip="The startdate and time of this event" placement="left">
                        <ion-label>Start:</ion-label>
                        <ion-datetime displayFormat="DD.MM.YY HH:mm" formControlName="eventStartsAt"></ion-datetime>
                    </ion-item>

                    <ion-item tooltip="The enddate and time of this event" placement="left">
                        <ion-label>End:</ion-label>
                        <ion-datetime displayFormat="DD.MM.YY HH:mm" formControlName="eventEndsAt"></ion-datetime>
                    </ion-item>

                </ion-item-group>

                <ion-item-group>
                    <ion-item-divider mode="md">
                        <ion-label>Event configuration</ion-label>
                    </ion-item-divider>

                    <ion-item tooltip="The maximum number of users who can join this event" placement="left">
                        <ion-label text-wrap>Max number of users</ion-label>
                        <ion-input type="number" formControlName="maxUsers" color="primary" text-right></ion-input>
                    </ion-item>

                    <ion-item tooltip="The duration of this event in minutes" placement="left">
                        <ion-label>Duration of event</ion-label>
                        <ion-input type="number" formControlName="maxDurationInMinutes" color="primary" text-right>
                        </ion-input>
                        <ion-label>min</ion-label>
                    </ion-item>

                    <ion-item tooltip="The maximum number of tracks in a playlist of this event" placement="left">
                        <ion-label text-wrap>Max number of tracks in playlist</ion-label>
                        <ion-input type="number" formControlName="maxTracksInPlaylist" color="primary" text-right>
                        </ion-input>
                    </ion-item>

                    <ion-item tooltip="Are duplicate tracks in a playlist allowed?" placement="left">
                        <ion-label>Duplicate tracks allowed</ion-label>
                        <ion-toggle color="primary" formControlName="allowDuplicateTracks"></ion-toggle>
                    </ion-item>

                    <ion-item tooltip="Can every user assume the Curator Role" placement="left">
                        <ion-label>All users are curators</ion-label>
                        <ion-toggle color="primary" formControlName="everybodyIsCurator"></ion-toggle>
                    </ion-item>

                    <ion-item tooltip="Stops playing current song in case of an error" placement="left">
                        <ion-label>Pause on play error</ion-label>
                        <ion-toggle color="primary" formControlName="pauseOnPlayError"></ion-toggle>
                    </ion-item>

                    <ion-item tooltip="Users can like tracks" placement="left">
                        <ion-label>Like tracks</ion-label>
                        <ion-toggle color="primary" formControlName="enableTrackLiking"></ion-toggle>
                    </ion-item>

                    <ion-item tooltip="Users can dislike tracks" placement="left">
                        <ion-label>Dislike tracks</ion-label>
                        <ion-toggle color="primary" formControlName="enableTrackHating"></ion-toggle>
                    </ion-item>

                    <ion-item tooltip="???" placement="left">
                        <ion-label>Play progress required</ion-label>
                        <ion-input type="number" formControlName="progressPercentageRequiredForEffectivePlaylist"
                            text-right></ion-input>
                        <ion-label>%</ion-label>
                    </ion-item>
                </ion-item-group>

                <ion-item-group>
                    <ion-item-divider mode="md">
                        <ion-label>Event Account Settings</ion-label>
                    </ion-item-divider>

                    <ion-item tooltip="Your Username as Event owner" placement="left" *ngIf="isCreate">
                        <ion-label>Owner Username:</ion-label>
                        <ion-input type="text" formControlName="userName" color="primary" text-right></ion-input>
                    </ion-item>

                    <ion-item tooltip="Choose your owner password to login later" placement="left">
                        <ion-label>Owner Password:</ion-label>
                        <ion-input type="text" formControlName="passwordOwner" color="primary" text-right></ion-input>
                    </ion-item>
                    <ion-item tooltip="Define a password for all curators of the event" placement="left">
                        <ion-label>Curator Password:</ion-label>
                        <ion-input type="text" formControlName="passwordCurator" color="primary" text-right></ion-input>
                    </ion-item>
                    <ion-item
                        tooltip="Optional: Define a password for regular users to join this event. If not it is public."
                        placement="left">
                        <ion-label>Password for Users:</ion-label>
                        <ion-input type="text" formControlName="passwordUser" color="primary" text-right></ion-input>
                    </ion-item>

                    <ion-item tooltip="Important! After creating this event, configure your Spotify Account."
                        placement="left">
                        <ion-label>MusicProvider</ion-label>
                        <ion-note slot="end">
                            <ion-button [disabled]="isCreate" color="primary" size="small"
                                href="/api/provider-spotify/v1/events/{{event.eventID}}/providers/spotify/login">
                                Add Spotify
                            </ion-button>
                        </ion-note>
                    </ion-item>
                </ion-item-group>

                <ion-item-group>
                    <ion-item-divider mode="md">
                        <ion-label>Demo configuration</ion-label>
                    </ion-item-divider>

                    <ion-item>
                        <ion-label text-wrap>Demo Mode: Auto Skip after</ion-label>
                        <ion-input color="primary" type="number" formControlName="demoAutoskip" text-right></ion-input>
                        <ion-label>s</ion-label>
                    </ion-item>

                    <ion-item>
                        <ion-label text-wrap>Demo Mode: no actual playing of tracks</ion-label>
                        <ion-toggle color="primary" formControlName="demoNoActualPlaying"></ion-toggle>
                    </ion-item>

                    <ion-item>
                        <ion-label text-wrap>Demo Mode: Fill Empty Playlist</ion-label>
                        <ion-toggle color="primary" formControlName="demoAutoFillEmptyPlaylist"></ion-toggle>
                    </ion-item>

                </ion-item-group>

                <ion-button *ngIf="isCreate" expand="full" shape="round"
                    (tap)="create(eventForm)">Create Event</ion-button>
                <ion-button *ngIf="!isCreate" expand="full" shape="round"
                    (tap)="update(eventForm)">Update Event</ion-button>

            </ion-list>

        </form>
    </div>

</ion-content>