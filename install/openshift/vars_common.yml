
# Common variables
# HEADS UP: Due to limitation of variable parsing, you cant
# use a variable defined here also in this file.
# So certain values might occur redudant! 
# Be sure to search for them and replace ALL occurences!
common:
  COMMON:
    NAMESPACE: "dfroehli-opendj-{{STAGE | mandatory}}"
# Remember to change Callback URL below, too:
    DNS_BASENAME: "{{STAGE}}.opendj.io"
    GIT:
      REF: "master"
    CONTAINER_IMAGE_BUILD: true
    CONTAINER_IMAGE_TAG: "latest"
    CONTAINER_IMAGE_FROM_NAMESPACE: "dfroehli-opendj-{{STAGE}}"

  BACKEND_EVENTSTORE:
    DEPLOY: true
    KAFKA:
      USE: false
      OPERATOR_AVAILABLE: true
      TOPIC_CMD:  oc --namespace dfroehli-opendj-{{STAGE}} rsh backend-eventstore-zookeeper-0 /opt/kafka/bin/kafka-topics.sh --zookeeper localhost:21810 
      NUM_BROKERS: 2
      NUM_ZOOKEPERS: 1
      NUM_PARTITIONS: 3
      
  BACKEND_DATAGRID:
    DEPLOY: true
    URL: "backend-datagrid:11222"
    UNDEPLOY: false
    LIMIT_MEMORY: "512Mi"
    STORAGE_SIZE: "1Gi"

  PROVIDER_SPOTIFY:
    DEPLOY: true
    REPLICAS: 2
    SPOTIFY_CALLBACK_URL: "http://{{STAGE}}.opendj.io/api/provider-spotify/v1/auth_callback"
    SPOTIFY_CLIENT_ID: "{{VAULT_SPOTIFY_CLIENT_ID}}"
    SPOTIFY_CLIENT_SECRET: "{{VAULT_SPOTIFY_CLIENT_SECRET}}"

  SERVICE_PLAYLIST:
    DEPLOY: true
    REPLICAS: 2

  SERVICE_WEB:
    DEPLOY: true
    REPLICAS: 2
    THROTTLE_EMITTER_PLAYLIST: 5000

  SERVICE_HOUSEKEEPING:
    DEPLOY: true

    
  FRONTEND_WEB:
    DEPLOY: true
    REPLICAS: 2
# Do not specific host - use relative hostname to allow switch between http/https:  
    WEBSOCKET_HOST: ""
    API_HOST: ""
    SERVER_TIMEOUT: "5000"
    INSECURE_EDGE_TERMINATION: "Allow"
    SPOTIFY_CALLBACK_URL: "http://{{STAGE}}.opendj.io/api/provider-spotify/v1/auth_callback"
    USE_RUNTIME_IMAGE: true
